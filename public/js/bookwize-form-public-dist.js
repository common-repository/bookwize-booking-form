jQuery(document).ready(function(){if(jQuery("[data-reservation-form]").length){var o=jQuery("[data-reservation-form]"),s=jQuery('[data-date="check-in"]'),l=jQuery('[data-date="check-out"]'),d=jQuery("[data-guests]"),n=jQuery("#adults"),e=(jQuery("#infants"),jQuery('[data-button="minus"]')),t=jQuery('[data-button="plus"]'),c=jQuery("html").attr("lang").substr(0,2),a=o.attr("data-key"),r=o.attr("data-id");jQuery.ajax({type:"GET",url:"https://app.bookwize.com/api/v1.4/hotels/info/"+r+"/?apikey="+a+"&lang="+c,success:function(e){if(void 0!==e.id){var t=function(e){var t=e.conditions.minCheckInDate;if(0<t.length){ciDateObj=new Date(t),t=jQuery.datepicker.formatDate(bwf_options.datepicker_format,ciDateObj),coDate=ciDateObj.setDate(ciDateObj.getDate()+1),coDateObj=new Date(coDate),coDate=jQuery.datepicker.formatDate(bwf_options.datepicker_format,coDateObj);var a=e.conditions.maxGuests;0===a.length&&(a=2);var r=e.conditions.maxStay;0===r.length&&(r=1);var i=e.conditions.defaultAdults;0===i.length&&(i=1);var n=e.info.guestTypes;0===n.length&&(n=[]);var u=e.info.boardTypes;return 0===u.length&&(u=[]),{first:t,second:coDate,maxGuests:a,adults:i,guestArray:n,boardArray:u,maxStay:r}}}(e);a=t,n.attr("value",a.adults),s.attr("value",a.first),l.attr("value",a.second),o.attr("max-guests",a.maxGuests),0<a.adults&&(jQuery("#guests").show(),jQuery(".guests__value").append(a.adults)),o.attr("max-stay",a.maxStay),0<c.length?jQuery.datepicker.setDefaults(jQuery.datepicker.regional[c]):jQuery.datepicker.setDefaults(jQuery.datepicker.regional.en),s.datepicker({dateFormat:bwf_options.datepicker_format,minDate:a.first,onSelect:function(){var e=s.datepicker("getDate");e.setDate(e.getDate()+1),l.datepicker("setDate",e),l.datepicker("option","minDate",e)},beforeShow:function(e,t){jQuery(e).after(jQuery(e).datepicker("widget")),setTimeout(function(){t.dpDiv.css({top:50,left:-15})},0)}}),l.datepicker({dateFormat:bwf_options.datepicker_format,onClose:function(){var e=s.datepicker("getDate");if(l.datepicker("getDate")<=e){var t=l.datepicker("option","minDate");l.datepicker("setDate",t)}},beforeShow:function(e,t){jQuery(e).after(jQuery(e).datepicker("widget")),setTimeout(function(){t.dpDiv.css({top:50,left:-15})},0)}}),r=t,i=0,jQuery.each(r.guestArray,function(e,t){if("Adult"===t.ageCategory){var a=' <input type="text" name="adults" id="adults" class="field__item-input" value="'+r.adults+'" disabled min="'+t.min+'" max="'+t.max+'" data-age="'+t.toAge+'">';jQuery("#adult").append(a).show()}"Infant"===t.ageCategory&&(a=' <input type="text" name="infant" id="infant" class="field__item-input" value="0" disabled min="'+t.min+'" max="'+t.max+'" data-age="'+t.toAge+'" >',jQuery("#infants").append(a).show(),jQuery("#infants .field__item-side-label").prepend(t.fromAge+" - "+t.toAge)),"Children"===t.ageCategory&&(a=' <input type="text" name="children" id="children-'+i+'" class="children field__item-input" value="0" disabled min="'+t.min+'" max="'+t.max+'" data-age="'+t.toAge+'">',jQuery("#children-"+i).append(a).show(),jQuery("#children-"+i+" .field__item-side-label").prepend(t.fromAge+" - "+t.toAge),i++)}),jQuery.each(r.boardArray,function(e,t){var a=' <option value="'+t.boardType+'" >'+t.name+"</option>";jQuery(".board").append(a)}),"true"===jQuery("#couponCode").attr("data-enable")&&jQuery("#couponCode").show(),"true"===jQuery("#board").attr("data-enable")&&jQuery("#board").show(),jQuery(".field__item").each(function(){jQuery(this).find(".value").text(jQuery(this).children("input").val())})}var r,i,a}}),e.click(function(){var e=jQuery(this).parent().siblings("input"),t=parseInt(e.attr("min"),10),a=e.val();jQuery(".children").each(function(){0<jQuery(this).val()&&jQuery(this).val()}),parseInt(a)>parseInt(t)&&(a--,e.val(a),jQuery(this).siblings(".value").text(a),jQuery(".guests__value").text(parseInt(jQuery(".guests__value").text())-1))}),t.click(function(){var e=jQuery(this).parent().siblings("input"),t=e.val(),a=jQuery("#adults").val(),r=0;jQuery(".children").each(function(){0<jQuery(this).val()&&(r+=parseInt(jQuery(this).val(),10))});var i=parseInt(o.attr("max-guests"),10);parseInt(a,10)+parseInt(r,10)<i&&"infants"!==e.attr("name")&&parseInt(t)<parseInt(e.attr("max"))&&(++t,e.val(t),jQuery(this).siblings(".value").text(t),jQuery(".guests__value").text(parseInt(jQuery(".guests__value").text())+1)),"infants"===e.attr("name")&&parseInt(t)<parseInt(e.attr("max"))&&(++t,e.val(t),jQuery(this).siblings(".value").text(t),jQuery(".guests__value").text(parseInt(jQuery(".guests__value").text())+1))}),o.submit(function(){var e=0,t="",a="";jQuery("#check-in").datepicker("option",{dateFormat:"yy-mm-dd"}),jQuery("#check-out").datepicker("option",{dateFormat:"yy-mm-dd"}),jQuery(".children").each(function(){0<jQuery(this).val()&&(e=parseInt(jQuery(this).val(),10),t=("/"+jQuery(this).attr("data-age")).repeat(e))});var r=parseInt(jQuery("#infant").val(),10);if(r&&(a=("/"+jQuery("#infant").attr("data-age")).repeat(r)),d.attr("value",jQuery("#adults").val()+t+a),(l.datepicker("getDate")-s.datepicker("getDate"))/1e3/60/60/24>o.attr("max-stay")){var i=new Date(jQuery('[name="ci"]').val()),n=o.attr("max-stay");i.setDate(i.getDate()+n),i=i.toISOString().substr(0,10),jQuery('[name="co"]').val(i)}var u=o.attr("action");u.indexOf("bookwize")<0?(o.removeAttr("target"),"en"!==c&&(u=window.location.origin+"/"+c+"/"+u,o.attr("action",u))):jQuery("<input>").attr({type:"hidden",id:"lang",name:"lang",value:c}).appendTo(o)}),jQuery(window).load(function(){var e=0;jQuery(".fields__wrapper").children(":visible").each(function(){e+=1});var t=jQuery(".reservation-form").width()/e-5+"px";"1"===jQuery(".reservation-form").attr("data-vertical")&&jQuery(".fields__wrapper").children(":visible").each(function(){jQuery(this).width(t)}),bwf_options.load_resources&&jQuery.ajax({type:"GET",url:"https://app.bookwize.com/api/v1.4/system/resources/?apikey="+a+"&lang="+c,success:function(e){var t;t=e,jQuery(".reservation-form label[for='check-in']").html(t.checkIn),jQuery(".reservation-form #check-in").attr("placeholder",t.checkIn),jQuery(".reservation-form label[for='check-out']").html(t.checkOut),jQuery(".reservation-form #check-out").attr("placeholder",t.checkOut),jQuery(".reservation-form label[for='guests']").html(t.guests),jQuery(".reservation-form label[for='adults']").html(t.adults),jQuery(".reservation-form label[for='children'].field__item-label").html(t.children),jQuery(".reservation-form label[for='infants'].field__item-label").html(t.infants),jQuery(".reservation-form label[for='couponCode']").html(t.promoCode),jQuery(".reservation-form input[name='couponCode']").attr("placeholder",t.enterPromoCode),jQuery(".reservation-form label[for='board']").html(t.boards),jQuery(".reservation-form input.form__submit").html(t.book),jQuery(".reservation-form input.form__submit").val(t.book)}})}),jQuery(document).click(function(){jQuery(".guests__wrapper").removeClass("opened"),jQuery(".guests__value").removeClass("opened")}),jQuery("#guests").click(function(e){e.stopPropagation(),jQuery(".guests__wrapper").addClass("opened"),jQuery(".guests__value").addClass("opened")})}});